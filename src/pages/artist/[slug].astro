---
//Henter getStaticPaths funktionen ned
export async function getStaticPaths() {
  //Lav variablen "url" med vores URL fra supabase
  const url = "https://muqgfdguddfkghqhbdai.supabase.co/rest/v1/kanonproduktion_events";

  //Lav variablen "api" med vores api nøgle
  const api = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11cWdmZGd1ZGRma2docWhiZGFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ3NTI1MjcsImV4cCI6MjAzMDMyODUyN30.V1cmTeBITytZYDHSYEemvpkdSObU40QtSWsIqANjXBY";

  //Lav variablen "data" som venter på url fetchet med GET metode
  //API nøgle godkener adgang
  const data = await fetch(url, {
    method: "GET",
    headers: {
      apikey: api,
    },
  }).then((response) => response.json());
  //Dataen bliver hentet som JSON-fil

  const pagesGenerate = data.map((oneArtist) => {
    return {
      params: { slug: oneArtist.slug },
      props: { person: oneArtist },
    };
  });
  console.log(data);
  return pagesGenerate;
}

const { person } = Astro.props;

//Lav variablen "url" med vores URL fra supabase
const url = "https://muqgfdguddfkghqhbdai.supabase.co/rest/v1/kanonproduktion_events";

//Lav variablen "api" med vores api nøgle
const api = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im11cWdmZGd1ZGRma2docWhiZGFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ3NTI1MjcsImV4cCI6MjAzMDMyODUyN30.V1cmTeBITytZYDHSYEemvpkdSObU40QtSWsIqANjXBY";

const data = await fetch(url, {
  method: "GET",
  headers: {
    apikey: api,
  },
}).then((res) => res.json());

import Button from "../../components/Button.astro";
import SocialIcon from "../../components/SocialIcon.astro";
import MainLayout from "../../layouts/MainLayout.astro";
---

<MainLayout title="Artist">
    <section class="artist">
        <h1></h1>
        <img src="" alt="">
        <p></p>
        <div class="information">
            <div class="tekst">
                <h2></h2>
                <p></p>
                <h4></h4>
                <SocialIcon></SocialIcon>
            </div>
            <div class="infoboks">
                <div class="dato">
                    <p></p>
                    <h3></h3>
                </div>
                <div class="aabner">
                    <p></p>
                    <h3></h3>
                </div>
                <div class="tid">
                    <p></p>
                    <h3></h3>
                </div>
                <div class="pris">
                    <p></p>
                    <h3></h3>
                </div>
                <Button></Button>
            </div>
        </div>
    </section>
</MainLayout>